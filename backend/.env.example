# backend/.env.example

# PostgreSQL Database
# Local development (recommended for reliability):
DATABASE_URL=postgresql://user:password@localhost:5432/tradesignal
# Production (Supabase):
# DATABASE_URL=postgresql://postgres:STRONG_PASSWORD@db.xxx.supabase.co:5432/postgres

# Note: The application includes DNS resolution resilience to handle network issues.
# If you experience recurring DNS failures on Windows:
# 1. Flush DNS cache: ipconfig /flushdns
# 2. Switch to Google DNS (8.8.8.8, 8.8.4.4) in network settings
# 3. Consider using local PostgreSQL for development

# JWT Settings (REQUIRED)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET=CHANGE_THIS_MIN_32_CHARS_REQUIRED
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# SEC EDGAR API (REQUIRED)
# Required by SEC EDGAR API - Use your real name and email
SEC_USER_AGENT="YourCompanyName contact@yourdomain.com"

# Stock Data - Alpha Vantage (Fallback for Yahoo Finance)
# Get from: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=GET_FROM_ALPHA_VANTAGE

# Finnhub (Phase 3.2 - Multi-source Failover)
# Get from: https://finnhub.io/register
FINNHUB_API_KEY=GET_FROM_FINNHUB

# FRED Economic Data (Federal Reserve)
# Get from: https://fred.stlouisfed.org/docs/api/api_key.html
FRED_API_KEY=GET_FROM_FRED

# Scraper
# CDT (Central Daylight Time) - Dallas, TX timezone
SCRAPER_TIMEZONE=America/Chicago
SIGNIFICANT_TRADE_THRESHOLD=100000

# Scheduler (Automated Scraping - Phase 4)
SCHEDULER_ENABLED=true
SCRAPER_SCHEDULE_HOURS=0,4,8,12,16,20
SCRAPER_DAYS_BACK=30
SCRAPER_MAX_FILINGS=50
SCRAPER_COOLDOWN_HOURS=3
# Congressional Trading Configuration (Phase 7)
CONGRESSIONAL_SCRAPER_ENABLED=true
CONGRESSIONAL_SCRAPE_HOURS=0,6,12,18
CONGRESSIONAL_SCRAPE_DAYS_BACK=60
CONGRESSIONAL_RATE_LIMIT=50
CONGRESSIONAL_CACHE_TTL_HOURS=6
USE_FALLBACK_SOURCES=true
CONGRESSIONAL_FALLBACK_MAX_AGE_DAYS=7

# Alerts
ALERTS_ENABLED=true
ALERT_CHECK_INTERVAL_MINUTES=5
MAX_ALERTS_PER_USER=50
ALERT_COOLDOWN_MINUTES=60

# Webhooks
WEBHOOK_TIMEOUT_SECONDS=10
WEBHOOK_RETRY_COUNT=3

# Email Configuration
# Get from your email provider (SendGrid, Resend, Brevo)
EMAIL_SERVICE=sendgrid
EMAIL_API_KEY=GET_FROM_YOUR_EMAIL_PROVIDER
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME="TradeSignal Alerts"

# Push Notifications (Web Push - Phase 5C)
# Generate with: npx web-push generate-vapid-keys
VAPID_PRIVATE_KEY=GENERATE_WITH_WEB_PUSH
VAPID_PUBLIC_KEY=GENERATE_WITH_WEB_PUSH
VAPID_PUBLIC_KEY_BASE64=GENERATE_WITH_WEB_PUSH
VAPID_SUBJECT=mailto:contact@yourdomain.com
PUSH_VAPID_CLAIMS_EMAIL=contact@yourdomain.com

# Brokerage OAuth & Encryption (Phase 3)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
TOKEN_ENCRYPTION_KEY=GENERATE_WITH_FERNET

# Alpaca Markets
ALPACA_OAUTH_CLIENT_ID=your-alpaca-client-id
ALPACA_OAUTH_CLIENT_SECRET=your-alpaca-client-secret
# PRODUCTION: Use HTTPS URL
ALPACA_REDIRECT_URI=https://yourdomain.com/api/v1/brokerage/callback/alpaca

# TD Ameritrade
TD_AMERITRADE_CLIENT_ID=your-td-client-id
# PRODUCTION: Use HTTPS URL
TD_AMERITRADE_REDIRECT_URI=https://yourdomain.com/api/v1/brokerage/callback/td_ameritrade

# Interactive Brokers
IB_CLIENT_ID=your-ib-client-id
# PRODUCTION: Use HTTPS URL
IB_REDIRECT_URI=https://yourdomain.com/api/v1/brokerage/callback/ib

# Feature Flags
ENABLE_AI_INSIGHTS=true
ENABLE_WEBHOOKS=true
ENABLE_EMAIL_ALERTS=true
ENABLE_PUSH_NOTIFICATIONS=true

# Redis Cache (Phase 4.1)
REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379

# Application
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
# PRODUCTION: Use HTTPS URLs only
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Admin User (for initial setup and testing)
SUPERUSER_EMAIL=admin@example.com
SUPERUSER_PASSWORD=adminpassword

# AI Configuration (Phase 6)
# Provider: "gemini" (default) or "openai"
AI_PROVIDER=gemini

# Google Gemini
# Get from: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=GET_FROM_GOOGLE_AI_STUDIO
GEMINI_MODEL=gemini-2.0-flash

# OpenAI (Optional fallback)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini

# Shared AI Settings
AI_MAX_TOKENS=1000
AI_TEMPERATURE=0.7
AI_CACHE_TTL_HOURS=24

# Stripe Payment Integration (Phase 8)
# PRODUCTION: Use live keys (sk_live_..., pk_live_...)
STRIPE_SECRET_KEY=sk_live_YOUR_LIVE_SECRET_KEY
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_LIVE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=whsec_YOUR_WEBHOOK_SECRET

# Stripe Price IDs (Monthly)
# Get from Stripe Dashboard -> Products
STRIPE_PRICE_BASIC=price_YOUR_BASIC_PRICE_ID
STRIPE_PRICE_PRO=price_YOUR_PRO_PRICE_ID
STRIPE_PRICE_ENTERPRISE=price_YOUR_ENTERPRISE_PRICE_ID

# Stripe Price IDs (Yearly)
STRIPE_PRICE_BASIC_YEARLY=price_YOUR_BASIC_YEARLY_ID
STRIPE_PRICE_PRO_YEARLY=price_YOUR_PRO_YEARLY_ID
STRIPE_PRICE_ENTERPRISE_YEARLY=price_YOUR_ENTERPRISE_YEARLY_ID

# Frontend URL for Stripe redirects
# PRODUCTION: Use HTTPS URL
FRONTEND_URL=https://yourdomain.com